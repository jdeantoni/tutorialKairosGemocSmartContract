// automatically generated by Xtext
grammar fr.inria.kairos.tuto.simplelanguage.xtext.SmartContractML with org.eclipse.xtext.common.Terminals

import "http://www.inria.fr/teams/kairos/simplelanguage" 
import "http://www.eclipse.org/emf/2002/Ecore" as ecore

SmartContract returns SmartContract:
	{SmartContract}
	'SmartContract'
	name=EString
		('->' initialState=[State|EString])?
		(ownedEvents+=Event)*
		(ownedStates+=State)*
		(ownedFunctions+=Function)* 
	;

Variable returns Variable:
	IntegerVariable;

EString returns ecore::EString:
	STRING | ID;

Event returns Event:
	{Event}
	'Event'
	name=EString
		'from' sourceState=[State|EString] //I fixed the opposite problems by following this: https://bugs.eclipse.org/bugs/show_bug.cgi?format=multiple&id=282486 
										   //                                                 comment 8
		'to' targetState=[State|EString]
	;

State returns State:
	{State}
	'State'
	name=EString
//		('inEvent' inputEvent=[Event|EString])?
//		('outEvent' outputEvent=[Event|EString])?
		('var' ':' ownedVariables+=Variable )? (ownedVariables+=Variable)*
	;

Function returns Function:
	{Function}
	'Function'
	name=EString
	'(' ')'
		(':' event=[Event|EString])?;

IntegerVariable returns IntegerVariable:
	{IntegerVariable}
	'int'
	name=EString
		( '=' initialValue=EInt)?;

EInt returns ecore::EInt:
	'-'? INT;
